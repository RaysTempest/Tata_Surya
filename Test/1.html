<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jelajah Antariksa - Media Pembelajaran Tata Surya</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #00001a;
            color: white;
            overflow: hidden;
            cursor: grab;
        }
        
        /* --- Animasi Intro --- */
        #splash-screen {
            background: linear-gradient(135deg, #00001a, #0c0c3b);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100;
            opacity: 1;
            transition: opacity 1s ease-in-out;
        }
        
        .logo-container {
            position: relative;
            width: 200px;
            height: 200px;
            animation: fadeInLogo 2s ease-out;
        }
        
        .logo-sun {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #ffcc00, #ff9900);
            border-radius: 50%;
            position: absolute;
            top: 50px;
            left: 50px;
            box-shadow: 0 0 40px #ffcc00, 0 0 80px #ff9900;
        }
        
        .logo-orbit {
            position: absolute;
            border: 2px solid rgba(255, 165, 0, 0.5);
            border-radius: 50%;
            animation: spin 20s linear infinite;
        }
        
        .logo-orbit:nth-child(2) { width: 150px; height: 150px; top: 25px; left: 25px; animation-duration: 15s; }
        .logo-orbit:nth-child(3) { width: 200px; height: 200px; top: 0; left: 0; animation-duration: 25s; }
        
        .logo-planet {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
        }
        
        .logo-planet1 { background-color: #4a90e2; top: -10px; left: 65px; }
        .logo-planet2 { background-color: #d0021b; top: 80px; left: -10px; }
        
        #splash-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-top: 2rem;
            letter-spacing: 5px;
            background: linear-gradient(90deg, #ffcc00, #ff6b81, #4a90e2);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: fadeInTitle 3s ease-out;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        @keyframes fadeInLogo { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes fadeInTitle { from { opacity: 0; letter-spacing: 20px; } to { opacity: 1; letter-spacing: 5px; } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* --- Tombol Mulai --- */
        #start-container {
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 1s ease-in-out, visibility 1s;
        }
        #start-button {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        #start-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px #4a90e2;
        }

        /* --- Tata Surya --- */
        #solar-system-viewport {
            position: fixed;
            inset: 0;
            opacity: 0;
            visibility: hidden;
            transition: opacity 1s ease-in-out;
        }
        #solar-system-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: 0 0;
            transition: transform 0.2s ease-out;
        }
        .sun {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle, #ffd700, #ff8c00);
            box-shadow: 0 0 50px #ffd700, 0 0 100px #ff8c00;
            position: absolute;
            top: -50px;
            left: -50px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .sun:hover { transform: scale(1.1); }
        .orbit {
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            position: absolute;
            transform-style: preserve-3d;
            animation: orbit-spin linear infinite;
        }
        .planet {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
            left: 50%;
            top: -10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .planet:hover {
            transform: scale(1.5);
            box-shadow: 0 0 20px #fff;
        }

        /* Ukuran dan kecepatan orbit planet */
        .mercury-orbit { width: 150px; height: 150px; top: -75px; left: -75px; animation-duration: 8.8s; }
        .mercury { width: 8px; height: 8px; top: -4px; background-color: #a9a9a9; }
        
        .venus-orbit { width: 220px; height: 220px; top: -110px; left: -110px; animation-duration: 22.5s; }
        .venus { width: 12px; height: 12px; top: -6px; background-color: #e6e6e6; }

        .earth-orbit { width: 300px; height: 300px; top: -150px; left: -150px; animation-duration: 36.5s; }
        .earth { width: 14px; height: 14px; top: -7px; background: linear-gradient(135deg, #4a90e2, #90ee90, #ffffff); }
        .earth::after { /* Bulan */ content: ''; width: 4px; height: 4px; background: #ccc; border-radius: 50%; position: absolute; left: 18px; top: 5px; }

        .mars-orbit { width: 380px; height: 380px; top: -190px; left: -190px; animation-duration: 68.7s; }
        .mars { width: 10px; height: 10px; top: -5px; background-color: #c1440e; }

        .jupiter-orbit { width: 550px; height: 550px; top: -275px; left: -275px; animation-duration: 120s; }
        .jupiter { width: 40px; height: 40px; top: -20px; background: radial-gradient(#d8ca9f, #a08f5a); }

        .saturn-orbit { width: 750px; height: 750px; top: -375px; left: -375px; animation-duration: 295s; }
        .saturn { width: 35px; height: 35px; top: -17.5px; background-color: #d3c0a2; }
        .saturn::before { /* Cincin */ content: ''; position: absolute; top: 15px; left: -15px; width: 65px; height: 5px; background: transparent; border: 2px solid #a5916d; border-radius: 50%; transform: rotate(-20deg); }

        .uranus-orbit { width: 900px; height: 900px; top: -450px; left: -450px; animation-duration: 840s; }
        .uranus { width: 25px; height: 25px; top: -12.5px; background-color: #b0e0e6; }

        .neptune-orbit { width: 1050px; height: 1050px; top: -525px; left: -525px; animation-duration: 1650s; }
        .neptune { width: 24px; height: 24px; top: -12px; background-color: #3f51b5; }
        
        .planet-label {
            position: absolute;
            background: rgba(0,0,0,0.7);
            padding: 2px 8px;
            border-radius: 5px;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            white-space: nowrap;
        }
        .planet:hover + .planet-label {
            opacity: 1;
        }

        @keyframes orbit-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        /* --- Bintang dan Efek --- */
        #stars-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .shooting-star {
            position: fixed;
            height: 2px;
            background: linear-gradient(-45deg, rgba(158, 215, 255, 1), rgba(0, 0, 0, 0));
            border-radius: 999px;
            filter: drop-shadow(0 0 6px rgba(188, 230, 255, 1));
            animation: tail 3s ease-in-out infinite, shooting 3s ease-in-out infinite;
        }
        @keyframes tail {
            0% { width: 0; } 30% { width: 100px; } 100% { width: 0; }
        }
        @keyframes shooting {
            0% { transform: translateX(0); } 100% { transform: translateX(300px); }
        }

        /* --- Modal Penjelasan --- */
        .modal {
            background: rgba(0, 0, 20, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* --- UI Kontrol --- */
        .control-button {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            transition: background 0.3s, transform 0.3s;
        }
        .control-button:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.1);
        }

        /* --- Kuis --- */
        .quiz-option {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            transition: background 0.3s;
        }
        .quiz-option:hover {
            background: rgba(74, 144, 226, 0.5);
        }
        .quiz-option.correct {
            background: rgba(46, 204, 113, 0.7);
        }
        .quiz-option.incorrect {
            background: rgba(231, 76, 60, 0.7);
        }
    </style>
</head>
<body class="w-screen h-screen">

    <!-- 1. Animasi Layar Pembuka -->
    <div id="splash-screen">
        <div class="logo-container">
            <div class="logo-sun"></div>
            <div class="logo-orbit">
                <div class="logo-planet logo-planet1"></div>
            </div>
            <div class="logo-orbit">
                <div class="logo-planet logo-planet2"></div>
            </div>
        </div>
        <h1 id="splash-title">JELAJAH ANTARIKSA</h1>
    </div>

    <!-- Daftar Planet (panel) -->
    <aside id="planet-list" class="fixed left-4 top-20 w-52 bg-black/50 backdrop-blur rounded-xl p-3 z-30 text-sm">
        <h3 class="text-white text-lg font-bold mb-2">Daftar Planet</h3>
        <ul id="planet-list-items" class="space-y-1"></ul>
    </aside>

    <!-- 2. Tombol Mulai Belajar -->
    <div id="start-container" class="fixed inset-0 flex justify-center items-center">
        <button id="start-button" class="bg-blue-500 hover:bg-blue-400 text-white font-bold py-4 px-10 border-b-4 border-blue-700 hover:border-blue-500 rounded-full text-2xl shadow-lg">
            Mulai Belajar
        </button>
    </div>

    <!-- Konten Utama: Tata Surya dan UI -->
    <div id="solar-system-viewport">
        <canvas id="stars-canvas"></canvas>
        
        <!-- 3 & 7. Tata Surya dengan Penghias -->
        <div id="solar-system-container">
            <!-- Matahari -->
            <div class="sun" data-planet="matahari"></div>
            <div class="planet-label" style="top: -70px; left: -25px;">Matahari</div>

            <!-- Planet-planet -->
            <div class="orbit mercury-orbit">
                <div class="planet mercury" data-planet="merkurius"></div>
                <div class="planet-label">Merkurius</div>
            </div>
            <div class="orbit venus-orbit">
                <div class="planet venus" data-planet="venus"></div>
                <div class="planet-label">Venus</div>
            </div>
            <div class="orbit earth-orbit">
                <div class="planet earth" data-planet="bumi"></div>
                <div class="planet-label">Bumi</div>
            </div>
            <div class="orbit mars-orbit">
                <div class="planet mars" data-planet="mars"></div>
                <div class="planet-label">Mars</div>
            </div>
            <div class="orbit jupiter-orbit">
                <div class="planet jupiter" data-planet="jupiter"></div>
                <div class="planet-label">Jupiter</div>
            </div>
            <div class="orbit saturn-orbit">
                <div class="planet saturn" data-planet="saturnus"></div>
                <div class="planet-label">Saturnus</div>
            </div>
            <div class="orbit uranus-orbit">
                <div class="planet uranus" data-planet="uranus"></div>
                <div class="planet-label">Uranus</div>
            </div>
            <div class="orbit neptune-orbit">
                <div class="planet neptune" data-planet="neptunus"></div>
                <div class="planet-label">Neptunus</div>
            </div>
        </div>
    </div>
    
    <!-- 5 & 6. Fitur Tambahan (UI Kontrol) -->
    <div id="ui-controls" class="fixed bottom-5 left-1/2 -translate-x-1/2 flex items-center gap-3 p-2 rounded-full z-20" style="background: rgba(0,0,20,0.5); backdrop-filter: blur(5px);">
        <button id="zoom-in" class="control-button w-12 h-12 rounded-full text-2xl font-bold">+</button>
        <button id="zoom-out" class="control-button w-12 h-12 rounded-full text-2xl font-bold">-</button>
        <button id="reset-view" class="control-button w-12 h-12 rounded-full flex justify-center items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v6h6"/><path d="M21 12A9 9 0 0 0 6 5.3L3 8"/><path d="M21 22v-6h-6"/><path d="M3 12a9 9 0 0 0 15 6.7l3-2.7"/></svg>
        </button>
        <button id="toggle-orbit" class="control-button w-12 h-12 rounded-full flex justify-center items-center">
            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
        </button>
         <button id="quiz-button" class="control-button px-4 h-12 rounded-full text-md font-bold">Kuis Seru</button>
    </div>
     <div id="fact-button" class="fixed top-5 right-5 z-20">
        <button class="control-button px-4 h-12 rounded-full text-md font-bold">Fakta Menarik!</button>
    </div>


    <!-- 4. Modal Penjelasan Planet (dengan Suara) -->
    <div id="planet-modal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-30 hidden">
        <div class="modal w-full max-w-2xl rounded-2xl shadow-lg p-8 relative transform scale-95 transition-transform duration-300">
            <button id="modal-close" class="absolute top-4 right-4 text-white hover:text-gray-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <h2 id="modal-title" class="text-4xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-yellow-300 to-orange-400"></h2>
            <p id="modal-description" class="text-lg leading-relaxed"></p>
            <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div>
                    <h4 class="text-sm text-gray-400">Jarak dari Matahari</h4>
                    <p id="modal-distance" class="text-xl font-semibold"></p>
                </div>
                <div>
                    <h4 class="text-sm text-gray-400">Diameter</h4>
                    <p id="modal-diameter" class="text-xl font-semibold"></p>
                </div>
                <div>
                    <h4 class="text-sm text-gray-400">Lama 1 Hari</h4>
                    <p id="modal-day" class="text-xl font-semibold"></p>
                </div>
                 <div>
                    <h4 class="text-sm text-gray-400">Lama 1 Tahun</h4>
                    <p id="modal-year" class="text-xl font-semibold"></p>
                </div>
            </div>
            <button id="speak-button" class="mt-6 w-12 h-12 bg-blue-500 rounded-full flex justify-center items-center mx-auto hover:bg-blue-600 transition">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stroke-white"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            </button>
        </div>
    </div>
    
    <!-- Kuis Modal -->
    <div id="quiz-modal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-40 hidden">
        <div class="modal w-full max-w-lg rounded-2xl shadow-lg p-8 relative">
            <button id="quiz-close" class="absolute top-4 right-4 text-white hover:text-gray-300">
                 <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <div id="quiz-content">
                <h2 class="text-2xl font-bold mb-4 text-center">Kuis Tata Surya!</h2>
                <p id="quiz-question" class="text-lg mb-6 text-center"></p>
                <div id="quiz-options" class="grid grid-cols-2 gap-4"></div>
                <div id="quiz-feedback" class="mt-4 text-center font-bold"></div>
            </div>
            <div id="quiz-result" class="hidden text-center">
                 <h2 class="text-3xl font-bold mb-4 text-yellow-300">Hasil Kuis</h2>
                 <p class="text-xl mb-2">Kamu berhasil menjawab</p>
                 <p class="text-5xl font-bold mb-4"><span id="quiz-score">0</span> / <span id="quiz-total">0</span></p>
                 <button id="quiz-retry" class="bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-6 rounded-full text-lg">Coba Lagi</button>
            </div>
        </div>
    </div>


<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- Database Planet ---
    const planetData = {
        matahari: {
            name: 'Matahari',
            description: 'Aku adalah Matahari, pusat tata surya. Aku adalah bintang raksasa yang sangat panas dan cahayaku menerangi semua planet. Tanpa aku, tidak akan ada kehidupan di Bumi, lho!',
            distance: '0',
            diameter: '1.4 juta km',
            day: '27 hari Bumi',
            year: '-'
        },
        merkurius: {
            name: 'Merkurius',
            description: 'Hai, aku Merkurius! Aku adalah planet terkecil dan paling dekat dengan Matahari. Di sini sangat panas di siang hari, dan sangat dingin di malam hari. Aku tidak punya bulan.',
            distance: '58 juta km',
            diameter: '4.879 km',
            day: '59 hari Bumi',
            year: '88 hari Bumi'
        },
        venus: {
            name: 'Venus',
            description: 'Aku Venus, si bintang fajar atau bintang senja. Aku planet terpanas di tata surya karena awan tebalku memerangkap panas. Aku berputar ke arah yang berlawanan dari planet lain!',
            distance: '108 juta km',
            diameter: '12.104 km',
            day: '243 hari Bumi',
            year: '225 hari Bumi'
        },
        bumi: {
            name: 'Bumi',
            description: 'Inilah aku, Bumi, rumah kita semua! Aku satu-satunya planet yang diketahui memiliki kehidupan dan air. Aku punya satu teman setia yang selalu mengikutiku, yaitu Bulan.',
            distance: '150 juta km',
            diameter: '12.742 km',
            day: '24 jam',
            year: '365.25 hari'
        },
        mars: {
            name: 'Mars',
            description: 'Aku Mars, si Planet Merah. Warna merahku berasal dari besi berkarat di permukaanku. Para ilmuwan sangat penasaran denganku dan sering mengirim robot untuk memeriksaku!',
            distance: '228 juta km',
            diameter: '6.779 km',
            day: '24.6 jam',
            year: '687 hari Bumi'
        },
        jupiter: {
            name: 'Jupiter',
            description: 'Aku Jupiter, planet terbesar di tata surya! Aku sangat besar sampai-sampai semua planet lain bisa muat di dalamku. Aku punya badai raksasa yang disebut Bintik Merah Raksasa.',
            distance: '778 juta km',
            diameter: '139.820 km',
            day: '9.9 jam',
            year: '11.9 tahun Bumi'
        },
        saturnus: {
            name: 'Saturnus',
            description: 'Aku Saturnus, planet yang terkenal dengan cincinku yang indah. Cincinku terbuat dari miliaran bongkahan es dan batu. Aku terlihat cantik, kan?',
            distance: '1.4 miliar km',
            diameter: '116.460 km',
            day: '10.7 jam',
            year: '29.5 tahun Bumi'
        },
        uranus: {
            name: 'Uranus',
            description: 'Aku Uranus, si raksasa es. Aku unik karena aku berputar miring seperti menggelinding. Jadi, kutubku kadang-kadang menghadap langsung ke Matahari.',
            distance: '2.9 miliar km',
            diameter: '50.724 km',
            day: '17.2 jam',
            year: '84 tahun Bumi'
        },
        neptunus: {
            name: 'Neptunus',
            description: 'Aku Neptunus, planet terjauh dari Matahari. Di sini sangat dingin dan berangin. Angin di sini adalah yang tercepat di seluruh tata surya!',
            distance: '4.5 miliar km',
            diameter: '49.244 km',
            day: '16.1 jam',
            year: '164.8 tahun Bumi'
        }
    };

    // --- Populate Daftar Planet panel dari planetData ---
    (function populatePlanetList(){
        const list = document.getElementById('planet-list-items');
        if (!list) return;
        list.innerHTML = '';
        Object.keys(planetData).forEach(key => {
            const info = planetData[key];
            const li = document.createElement('li');
            li.className = 'flex items-center justify-between bg-white/5 hover:bg-white/10 rounded px-2 py-1 cursor-pointer';
            li.setAttribute('data-planet', key);
            li.innerHTML = `<span class="text-white">${info.name}</span> <span class="text-gray-300 text-xs">${info.distance}</span>`;
            li.addEventListener('click', (e) => {
                e.stopPropagation();
                // Jika fungsi showPlanetInfo ada, panggil
                if (typeof showPlanetInfo === 'function') showPlanetInfo(key);
            });
            list.appendChild(li);
        });
    })();

    const quizQuestions = [
        { question: "Planet manakah yang paling dekat dengan Matahari?", options: ["Venus", "Merkurius", "Bumi", "Mars"], answer: "Merkurius" },
        { question: "Planet apa yang dikenal sebagai 'Planet Merah'?", options: ["Jupiter", "Saturnus", "Mars", "Bumi"], answer: "Mars" },
        { question: "Planet terbesar di tata surya adalah...", options: ["Jupiter", "Bumi", "Neptunus", "Saturnus"], answer: "Jupiter" },
        { question: "Planet manakah yang memiliki cincin yang indah?", options: ["Uranus", "Mars", "Jupiter", "Saturnus"], answer: "Saturnus" },
        { question: "Rumah kita, tempat tinggal semua makhluk hidup, adalah planet...", options: ["Venus", "Bumi", "Mars", "Merkurius"], answer: "Bumi" },
        { question: "Planet manakah yang paling panas?", options: ["Merkurius", "Venus", "Bumi", "Matahari"], answer: "Venus"}
    ];

    const randomFacts = [
        "Di Jupiter dan Saturnus, hujan turun dalam bentuk berlian!",
        "Satu hari di Venus lebih lama dari satu tahunnya.",
        "Matahari sangat besar, sekitar 1 juta Bumi bisa muat di dalamnya.",
        "Jejak kaki astronot di Bulan akan tetap ada di sana selamanya karena tidak ada angin.",
        "Ada lebih banyak bintang di alam semesta daripada butiran pasir di semua pantai di Bumi."
    ];

    // --- Variabel State ---
    let currentZoom = 0.5;
    let isPanning = false;
    let startPan = { x: 0, y: 0 };
    let panOffset = { x: 0, y: 0 };
    let isOrbiting = false;

    // --- Elemen DOM ---
    const splashScreen = document.getElementById('splash-screen');
    const startContainer = document.getElementById('start-container');
    const startButton = document.getElementById('start-button');
    const solarSystemViewport = document.getElementById('solar-system-viewport');
    const solarSystemContainer = document.getElementById('solar-system-container');
    const uiControls = document.getElementById('ui-controls');
    const planetModal = document.getElementById('planet-modal');
    const modalClose = document.getElementById('modal-close');
    const quizModal = document.getElementById('quiz-modal');
    const quizClose = document.getElementById('quiz-close');
    const quizButton = document.getElementById('quiz-button');
    const factButton = document.getElementById('fact-button');
    
    // --- Inisialisasi ---
    function init() {
        setupSplashScreen();
        setupEventListeners();
        createStarfield();
        createShootingStars();
        updateTransform();
    }

    // --- Fungsi Pengaturan Awal ---
    function setupSplashScreen() {
        setTimeout(() => {
            splashScreen.style.opacity = '0';
            startContainer.style.opacity = '1';
            startContainer.style.visibility = 'visible';
            setTimeout(() => splashScreen.style.display = 'none', 1000);
        }, 4000);
    }
    
    function setupEventListeners() {
        startButton.addEventListener('click', startExperience);
        
        // Kontrol Zoom dan Pan
        document.getElementById('zoom-in').addEventListener('click', () => zoom(0.1));
        document.getElementById('zoom-out').addEventListener('click', () => zoom(-0.1));
        document.getElementById('reset-view').addEventListener('click', resetView);
        solarSystemViewport.addEventListener('wheel', (e) => {
            e.preventDefault();
            zoom(e.deltaY * -0.001);
        });
        solarSystemViewport.addEventListener('mousedown', (e) => {
            isPanning = true;
            solarSystemViewport.style.cursor = 'grabbing';
            startPan = { x: e.clientX - panOffset.x, y: e.clientY - panOffset.y };
        });
        solarSystemViewport.addEventListener('mousemove', (e) => {
            if (!isPanning) return;
            panOffset.x = e.clientX - startPan.x;
            panOffset.y = e.clientY - startPan.y;
            updateTransform();
        });
        window.addEventListener('mouseup', () => {
             isPanning = false;
             solarSystemViewport.style.cursor = 'grab';
        });

        // Interaksi Planet
        document.querySelectorAll('.planet, .sun').forEach(el => {
            el.addEventListener('click', () => showPlanetInfo(el.dataset.planet));
        });
        modalClose.addEventListener('click', hidePlanetInfo);
        document.getElementById('speak-button').addEventListener('click', speakModalDescription);

        // Kontrol Orbit
        document.getElementById('toggle-orbit').addEventListener('click', toggleOrbit);

        // Kuis
        quizButton.addEventListener('click', startQuiz);
        quizClose.addEventListener('click', () => quizModal.classList.add('hidden'));
        document.getElementById('quiz-retry').addEventListener('click', startQuiz);

        // Fakta Menarik
        factButton.addEventListener('click', showRandomFact);
    }

    // --- Fungsi Utama ---
    function startExperience() {
        startContainer.style.opacity = '0';
        solarSystemViewport.style.opacity = '1';
        solarSystemViewport.style.visibility = 'visible';
        setTimeout(() => {
            startContainer.style.display = 'none';
            toggleOrbit(); // Auto play orbit
        }, 1000);
    }

    function showPlanetInfo(planetId) {
        const data = planetData[planetId];
        if (!data) return;

        document.getElementById('modal-title').textContent = data.name;
        document.getElementById('modal-description').textContent = data.description;
        document.getElementById('modal-distance').textContent = data.distance;
        document.getElementById('modal-diameter').textContent = data.diameter;
        document.getElementById('modal-day').textContent = data.day;
        document.getElementById('modal-year').textContent = data.year;
        
        planetModal.classList.remove('hidden');
        setTimeout(() => planetModal.querySelector('.modal').classList.add('scale-100'), 10);
        speakModalDescription();
    }

    function hidePlanetInfo() {
        window.speechSynthesis.cancel();
        planetModal.querySelector('.modal').classList.remove('scale-100');
        setTimeout(() => planetModal.classList.add('hidden'), 300);
    }
    
    // Fungsi Suara
    function speak(text) {
        window.speechSynthesis.cancel(); // Hentikan suara sebelumnya
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'id-ID';
        utterance.rate = 0.9;
        
        // Coba cari suara anak-anak jika ada (tergantung browser)
        let voices = window.speechSynthesis.getVoices();
        let femaleVoice = voices.find(voice => voice.lang === 'id-ID' && voice.name.includes('Female'));
        if (femaleVoice) {
            utterance.voice = femaleVoice;
        }

        window.speechSynthesis.speak(utterance);
    }
    
    // Pastikan suara dimuat sebelum digunakan
    window.speechSynthesis.onvoiceschanged = () => {
        // console.log("Voices loaded");
    };

    function speakModalDescription() {
        const title = document.getElementById('modal-title').textContent;
        const description = document.getElementById('modal-description').textContent;
        speak(`${title}. ${description}`);
    }

    function showRandomFact() {
        const randomFact = randomFacts[Math.floor(Math.random() * randomFacts.length)];
        // Menggunakan modal planet untuk menampilkan fakta
        document.getElementById('modal-title').textContent = "Fakta Menarik Antariksa";
        document.getElementById('modal-description').textContent = randomFact;
        document.querySelectorAll('.modal .grid div').forEach(el => el.style.display = 'none');
        document.getElementById('speak-button').style.display = 'block';

        planetModal.classList.remove('hidden');
        setTimeout(() => planetModal.querySelector('.modal').classList.add('scale-100'), 10);
        
        speak(randomFact);
    }

    // Fungsi Kontrol Tampilan
    function updateTransform() {
        solarSystemContainer.style.transform = `translate(${panOffset.x}px, ${panOffset.y}px) scale(${currentZoom})`;
    }

    function zoom(amount) {
        currentZoom = Math.max(0.1, Math.min(3, currentZoom + amount));
        updateTransform();
    }

    function resetView() {
        currentZoom = 0.5;
        panOffset = { x: 0, y: 0 };
        updateTransform();
    }

    function toggleOrbit() {
        isOrbiting = !isOrbiting;
        const orbits = document.querySelectorAll('.orbit');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');

        orbits.forEach(orbit => {
            orbit.style.animationPlayState = isOrbiting ? 'running' : 'paused';
        });

        if (isOrbiting) {
            playIcon.classList.add('hidden');
            pauseIcon.classList.remove('hidden');
        } else {
            playIcon.classList.remove('hidden');
            pauseIcon.classList.add('hidden');
        }
    }

    // --- Fungsi Efek Visual ---
    function createStarfield() {
        const canvas = document.getElementById('stars-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let stars = [];
        for (let i = 0; i < 500; i++) {
            stars.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                radius: Math.random() * 1.5,
                alpha: Math.random(),
                dAlpha: Math.random() * 0.02 - 0.01
            });
        }

        function drawStars() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            stars.forEach(star => {
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
                ctx.fill();
                
                star.alpha += star.dAlpha;
                if (star.alpha > 1) { star.alpha = 1; star.dAlpha *= -1; }
                if (star.alpha < 0) { star.alpha = 0; star.dAlpha *= -1; }
            });
            requestAnimationFrame(drawStars);
        }
        drawStars();
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    }

    function createShootingStars() {
        setInterval(() => {
            const star = document.createElement('div');
            star.className = 'shooting-star';
            const startX = Math.random() * window.innerWidth;
            const startY = Math.random() * window.innerHeight * 0.5;
            const duration = Math.random() * 2 + 1;
            
            star.style.top = `${startY}px`;
            star.style.left = `${startX}px`;
            star.style.animationDuration = `${duration}s`;
            
            document.body.appendChild(star);
            setTimeout(() => star.remove(), duration * 1000);
        }, 3000);
    }
    
    // --- Logika Kuis ---
    let currentQuestionIndex = 0;
    let score = 0;

    function startQuiz() {
        currentQuestionIndex = 0;
        score = 0;
        document.getElementById('quiz-content').style.display = 'block';
        document.getElementById('quiz-result').classList.add('hidden');
        quizModal.classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        const question = quizQuestions[currentQuestionIndex];
        document.getElementById('quiz-question').textContent = question.question;
        const optionsContainer = document.getElementById('quiz-options');
        optionsContainer.innerHTML = '';
        document.getElementById('quiz-feedback').textContent = '';

        question.options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.className = 'quiz-option p-4 rounded-lg text-lg';
            button.onclick = () => selectAnswer(option, question.answer, button);
            optionsContainer.appendChild(button);
        });
    }

    function selectAnswer(selected, correct, button) {
        document.querySelectorAll('.quiz-option').forEach(btn => btn.disabled = true);
        const feedback = document.getElementById('quiz-feedback');
        
        if (selected === correct) {
            score++;
            button.classList.add('correct');
            feedback.textContent = "Benar! Hebat!";
            feedback.style.color = '#2ecc71';
        } else {
            button.classList.add('incorrect');
            feedback.textContent = `Salah. Jawaban yang benar adalah ${correct}.`;
            feedback.style.color = '#e74c3c';
        }
        
        setTimeout(() => {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizQuestions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }, 2000);
    }

    function showResults() {
        document.getElementById('quiz-content').style.display = 'none';
        document.getElementById('quiz-result').classList.remove('hidden');
        document.getElementById('quiz-score').textContent = score;
        document.getElementById('quiz-total').textContent = quizQuestions.length;
    }


    init();
});
</script>

</body>
</html>
